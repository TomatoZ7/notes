# MongoDB 介绍

## 1 MongoDB 简介和设计特点

`MongoDB` 是一款强大、灵活，且易于扩展的通用型数据库。它能扩展出非常多的功能，如二级索引(secondary index)、范围查询(range query)、排序、聚合(aggregation)，以及地理空间索引(geoapstial index)。

### 1.1 易于使用

`MongoDB` 是一个**面向文档**(documen-oriented)的数据库，而不是关系型数据库。

与关系型数据库相比，面向文档的数据库不再有"行"(row)的概念，取而代之的是更为灵活的"文档"(document)模型。通过在文档中嵌入文档和数组，面向文档的方法能够仅使用一条记录来表现复杂的层次关系。

另外，不再有预定义模式(predefined schema) : 文档的键(key)和值(value)不再是固定的类型和大小。由于没有固定的模式，根据需要添加或删除字段变得更容易了。

### 1.2 易于扩展

随着数据量的不断增长，开发者面临一个困难：如何扩展数据库？实质上，这是纵向扩展(scale up)和横向扩展(scale out)之间的选择。

纵向扩展就是使用计算能力更强的机器，而横向扩展就是通过分区将数据分散到更多机器上。

通常，纵向扩展是最省力的做法，其缺点是大型机一般都非常昂贵。而且，当数据量达到机器的物理极限时，纵向扩展也就提升不大了。

横向扩展只需购买一台普通的服务器并把它添加到集群即可。横向扩展既便宜又易于扩展，但是管理 1000 台机器比管理一台机器显然要困难得多。

`MongoDB` 的设计采用横向扩展。面向文档的数据模型使它能很容易地在多台服务器之间进行数据分割。`MongoDB` 能自动处理跨集群的数据和负载，自动重新分配文档，以及将用户请求路由到正确的机器上。如果一个集群需要更大的容量，只需要向集群添加新服务器，`MongoDB` 就会自动将现有数据向新服务器传送。

### 1.3 丰富的功能

`MongoDB` 并不具备关系型数据库中普遍的功能如连接(join)和复杂的多行事务(multirow transaction)，省略这些功能是出于架构上的考虑，因为在分布式系统中这两个功能难以高效地实现。

#### 1.3.1 索引(indexing)

`MongoDB` 支持通用二级索引，允许多种快速查询，且提供唯一索引、复合索引、地理空间索引以及全文索引。

#### 1.3.2 聚合(aggregation)

`MongoDB` 支持"聚合管道"(aggregation pipeline)。用户能通过简单的片段创建复杂的聚合，并通过数据库自动优化。

#### 1.3.3 特殊的集合类型

`MongoDB` 支持存在时间有限的集合，适用于那些将在某个时刻过期的数据，如会话(session)。类似的，`MongoDB` 也支持固定大小的集合，用于保存近期数据，如日志。

#### 1.3.4 文件存储(file storage)

`MongoDB` 支持一种非常易用的协议，用于存储大文件和文件元数据。