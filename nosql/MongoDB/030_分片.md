# 分片

## 1 简介

**分片（sharding）是指将数据拆分，将其分散存放在不同的机器上的过程。**有时也用**分区（partitioning）**来表示这个概念。将数据分散到不同的机器上，不需要功能强大的大型计算机就可以储存更多的数据，处理更大的负载。

**几乎所有数据库软件都能进行手动分片（manual sharding）。**应用需要维护与若干不同数据库服务器的连接，每个连接还是完全独立的。应用程序管理不同服务器上不同数据的存储，还管理在合适的数据库上查询数据的工作。这种方法可以很好地工作，但是非常难以维护，比如向集群添加节点或从集群删除节点都很困难，调整数据分布和负载模式也不轻松。

`MongoDB` 支持**自动分片（autosharding）**，可以使数据库架构对应用程序不可见，也可以简化系统管理。对应用程序而言，好像始终在一个单机的 `MongoDB` 服务器一样。另一方面，`MongoDB` 自动处理数据再分片上的分布，也更容易添加和删除分片。不管从开发角度还是运营角度来说，分片都是最困难最复杂的 `MongoDB` 配置方式。

## 2 集群的组件

`MongoDB` 的分片机制允许你创建一个包含许多台机器（分片）的集群，将数据子集分散在集群中，每个分片维护着一个数据集合的子集。与单机服务器和副本集相比，使用集群架构可以使应用程序具有更大的数据处理能力。

