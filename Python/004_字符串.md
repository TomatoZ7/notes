# 字符串

在 `py` 中字符串是基本数据类型，是一个不可变的字符序列。

## 1 字符串的驻留机制

驻留机制：只保存一份不可变字符串的方法。不同的值被存放在字符串的驻留池中，`py` 的驻留机制对相同的字符串只保留一份拷贝，后续创建相同字符串时，不会开辟新空间，而是把该字符串的地址赋给新创建的变量。

### 1.1 驻留机制的几种情况（交互模式，PyCharm 会做优化）

+ 字符串的长度为 0 或 1 时
+ 复合标识符的字符串（字母、数字、下划线组成）
+ 字符串只在编译时进行驻留，而非运行时
+ -5 - 256 之间的整数数字

### 1.2 强制驻留

```shell
>>> import sys
>>> a='abc%'
>>> b='abc%'
>>> a is b
False
>>> a=sys.intern(b)
>>> a is b
True 
```

### 1.3 优缺点

+ 当需要值相同的字符串时，可以直接从字符串池里拿来使用，避免频繁的创建和销毁，**提升效率和节约内存**。拼接和修改字符串会比较影响性能。

+ 拼接字符串时建议使用 `str.join()`，而非 `+`，因为 `join()` 方法是先计算出所有字符中的长度，然后再拷贝，只 `new` 一次对象，效率要比 `+` 高。