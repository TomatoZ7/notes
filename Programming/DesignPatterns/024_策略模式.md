# 策略模式（Strategy）

现实生活中的例子：

在一个需要排序的场景，我们已经实现了冒泡排序，但是随着数据的增长，冒泡排序开始变得非常缓慢。为了解决这个问题，我们实现了快速排序。但是现在虽然快速排序算法对大型数据集的效果更好，但对于较小的数据集来说速度非常慢。为了解决这个问题，我们实施了一个策略，对于小型数据集使用冒泡排序，更大规模的使用快速排序。

通俗解释：

> 策略模式允许您根据情况切换算法或策略。

维基百科：

> 在计算机编程中，策略模式（也称政策模式）是一种软件行为设计模式，可以在运行时选择算法的行为。

以上面的例子为例，我们有策略接口和不同的策略实现：

```php
interface SortStrategy
{
    public function sort(array $dataset): array;
}

class BubbleSortStrategy implements SortStrategy
{
    public function sort(array $dataset): array
    {
        echo 'Sorting using bubble sort';

        // Do sorting
        return $dataset;
    }
}

class QuickSortStrategy implements SortStrategy
{
    public function sort(array $dataset): array
    {
        echo 'Sorting using quick sort';

        // Do sorting
        return $dataset;
    }
}
```

然后客户端将使用任何策略

```php
class Sorter
{
    protected $sorter;

    public function __construct(SortStrategy $sorter)
    {
        $this->sorter = $sorter;
    }

    public function sort(array $dataset): array
    {
        return $this->sorter->sort($dataset);
    }
}
```

它可以用作：

```php
$dataset = [1, 5, 4, 3, 2, 8];

$sorter = new Sorter(new BubbleSortStrategy());
$sorter->sort($dataset);    // Output: Sorting using bubble sort

$sorter = new Sorter(new QuickSortStrategy());
$sorter->sort($dataset);    // Output: Sorting using bubble sort
```