# 短链接的设计与实现

## 1 长链接 & 短链接

`https://github.com/TomatoZ7/notes-of-tz` 这个地址一共 `39` 个字符，属于长链接（实际情况下可能会携带各种参数，会更长）。

`https://github.com/U12zi` 这个地址是上面长链接经过处理得到，一共 `24` 个字符，属于短链接。

## 2 为什么需要短链接

以发送营销短信为例，每一条短信的字符是有上限的。如果使用长链接，那么很容易超过单条短信字符数量上限，变成两条短信。不仅增加成本，而且用户体验很差。如果使用短链接，将减少链接部分文字，从而增加文本文字数量。

除了营销场景之外，还多应用于二维码。

## 3 短链接如何跳到长链接

假设用户收到营销短信，之后点击营销短信里面的短链接，是如何跳到长链接的？

![image](https://github.com/TomatoZ7/notes-of-tz/blob/master/Programming/images/short_link_1.jpg)

主要分为三步：

1. 客户端访问短链接地址，短链接服务器校验是否是自己颁发的地址；

2. 短链接服务器识别出是自己颁发的地址，302 重定向到长链接地址；

3. 客户端获取到长链接地址进行访问。

## 4 长链接如何生成短链接

可以通过哈希算法和进制升级得到想要的短链接。如 `Google` 的 `guava` 包有 `MurmurHash` 算法的实现。