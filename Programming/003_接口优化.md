# 接口优化

1. 批量思想：插入数据时，用批量操作来代替 `for` 循环插入。
2. 异步思想：将耗时的操作放到**异步**进程里去处理。
3. 空间换时间思想：比如**缓存**就是一种空间换时间的思想。
4. 预取思想：通常搭配缓存一起用，其原理是在缓存空间换时间基础上更进一步，再加上一次“时间换时间”，也就是：用事先预取的耗时，换取第一次加载的时间。
5. 池化思想：以线程池为例，线程池可以帮我们管理线程，增加创建线程和销毁线程的资源损耗。
6. 事件回调思想：

假设你在接口逻辑中调用了系统 A 的接口，但是它需要等待 10s 才能响应，这时候如果一直阻塞等待，显然是不合理的。我们可以**参考 I/O 多路复用模型**，即我们不用等待系统 A 的接口，而是先去做别的操作。等系统 A 的接口处理完，通过**事件回调通知**，我们接收到通知在进行对应处理即可。

7. 远程调用由串行改为并行：就像前端请求首页数据时，同时发起多个请求，请求不同模块的数据。
8. 锁粒度避免过粗。
9. 切换存储方式：如果数据太大，落地数据库实在是慢的话，可以考虑先**用文件的方式暂存**。先保存文件，再**异步下载文件，慢慢保存到数据库**。
10. 索引。
11. 避免大事务。
12. 避免深分页问题。
13. 优化程序结构：比如程序逻辑混乱、多次重复查数据库、逻辑算法不够高效等。
14. 压缩传输内容：比如图片这些，可以适当压缩。