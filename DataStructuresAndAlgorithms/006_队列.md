# 队列

## 1 如何理解队列

队列这个概念非常好理解，你可以把它想象成排队买票，先来的先买，后来的只能站队尾，不能插队。先进者先出，这就是典型的**队列（Queue）**。

我们知道，栈只支持两个基本操作：**入栈 `push` **和**出栈 `pop`**。队列与栈非常相似，最基本的操作也是两个：**入队 `enqueue`**，把一个数据放入队尾；**出队 `dequeue`**，从队列头部取一个元素。

<!-- image -->

所以，队列和栈一样，也是一种**操作受限的线性表数据结构**。

作为一种非常基础的数据结构，队列的应用也非常广泛，特别是一些具有额外特性的队列，比如**循环队列**，**阻塞队列**，**并发队列**。它们在很多偏底层系统、框架、中间件的开发中，起着关键性的作用。比如高性能队列 `Disruptor`、Linux 环形缓存，都用到了循环并发队列；Java `concurrent` 并发包利用 `ArrayBlockingQueue` 来实现公平锁等。

## 2 顺序队列和链式队列

跟栈一样，队列既可以用数组来实现，也可以用链表来实现。基于数组的称为**顺序队列**，基于链表的称为**链式队列**。

顺序队列源码：

```java
public class ArrayQueue
{
    private String[] items;     // 存储队列元素的数组
    private int n;      // 表示队列大小
    private int head;   // 队列头指针
    private int tail;   // 队列尾指针

    // 申请一个大小为 capacity 的数组
    public ArrayQueue(int capacity) {
        items = new String[capacity];
        n = capacity;
    }

    // 入队
    public boolean enqueue(String item) {
        // 如果队列已满，返回 false
        if (tail == n) {
            return false;
        }

        items[tail] = item;
        ++tail;
        return true;
    }

    // 出队
    public String dequeue() {
        // 如果队列为空，返回 null
        if (tail == head) {
            return null;
        }

        String res = items[head];
        ++head;
        return res;
    }
}
```

队列需要两个指针，一个 `head` 指向队头，一个 `tail` 指向队尾。当有数据入队时，`tail` 指针往右偏移；当有数据出队时，`head` 指针往左偏移。