# 算法题：细胞分裂

## 题目

1个细胞，每1小时分裂成2个，分裂3次之后，本体会死掉。n个小时之后，有多少个细胞？

## 分析

我们将 n 个小时的细胞数定义为 f(n)，像这种知道 f(0), f(1), f(2) 的题目，求证 f(n) 时往往是跟 f(n-1) 或者 f(n-k) 有关的。主要是需要找到递推公式，下面从 `n=0` 时开始递推：

| 小时数(n) | 细胞数f(n) |
| :------: | :-------: |
| 0 | 1 |
| 1 | 2 |
| 2 | 4 |
| 3 | 7 |
| 4 | 13 |
| 5 | 24 |

这里的计算主要分为两步骤，首先是细胞分裂，即 `f(n-1) * 2`，其次是细胞死亡，细胞死亡是计算数。

比如第 4 小时，先从第 3 小时的细胞数分裂 `7*2=14`，接着减去死亡的细胞数。直观上来说我们会认为第 1 小时的细胞分裂了 3 次，所以减去得到 `7*2-2=12` 而推导出公式 `f(n) = 2*f(n-1) - f(n-3)`。

但这是错误的。因为第 1 小时的 2 个细胞中有一个细胞来自第 0 小时，而第 0 小时的细胞在第 3 小时时已经死亡，所以第 4 小时只会死亡一个细胞，正确答案是 `7*2-1=13`。

所以，当 `n > 4` 时， `f(n-3)` 是指 3 小时前的细胞总数，而我们要减去的是 3 小时前新分裂的细胞数，而 3 小时前新分裂的细胞数正好等于 4 小时前的细胞数，所以最后的公式是：`f(n) = 2*f(n-1) - f(n-4)`。

## 代码

```java
public static int getCellDivisionNum(int n){
    if (n < 0) return 0;
    
    if (n == 0) return 1;
    
    if (n == 1 || n == 2) return 2 * getCellDivisionNum(n - 1);
    
    if (n == 3) return 2 * getCellDivisionNum(n - 1) - 1;
    
    return 2 * getCellDivisionNum(n - 1) - getCellDivisionNum(n - 4);
}
```