# Go 代码片段

## 1.字符串

### 1.1 如何修改字符串中的一个字符

```go
str := "hello"
c := []byte(str)
c[0] = 'c'
str2 := string(c)   // cello
```

### 1.2 如何获取字符串的子串

```go
substr := str[n:m]
```

### 1.3 如何使用 for 或 for-range 遍历一个字符串

```go
for i := 0; i < len(str); i++ {
    ... = str[i]
}

for ix, ch := range str {
    ...
}
```

### 1.4 如何获取一个字符串的字节数

```go
len(str)
```

### 1.5 如何获取一个字符串的字符数：

```go
utf8.RuneCountInString(str) // 最快速

len([]int(str))
```

### 1.6 如何拼接字符串

使用 `bytes.Buffer`：

```go
str1 := "hello"
str2 := "world"
var buf bytes.Buffer
buf.WriteString(str1)
buf.WriteString(str2)
fmt.Println(buf.String())
```

`Strings.Join()`：

```go
str1 := "hello"
str2 := "world"
str := []string{str1, str2}
fmt.Println(strings.Join(str, ""))
```

使用 `+=`：

```go
str1 := "hello"
str2 := "world"
str1 += str2
fmt.Println(str1)
```

### 1.7 如何解析命令行参数

使用 `os` 或者 `flag` 包

```go
// input `go run xxx.go -t test`
os.Arg  // -t test

// input `go run xxx.go param1 param2 param3`
flag.PrintDefaults()
flag.Parse() // Scans the arg list and sets up flags
for i := 0; i < flag.NArg(); i++ {
    fmt.Println(flag.Arg(i))
}
```

## 2.数组和切片

创建：

```go
arr := new([len]type)
slice := make([]type, len)
```

初始化：

```go
arr := [...]type{i1, i2, i3, i4, i5}
arrKeyValue := [len]type{i1: v1, i2: v2}
var slice1 []type = arr1[start:end]
```

### 2.1 如何截断数组或者切片的最后一个元素

```go
line = line[:len(line)-1]
```

### 2.2 如何使用 for 或者 for-range 遍历一个数组（或者切片）

```go
for i := 0; i < len(arr); i++ {
    ... = arr[i]
}
for ix, value := range arr {

}
```

### 2.3 如何在一个二维数组或者切片 `arr2Dim` 中查找一个指定值 `V`：

```go
found := false
```